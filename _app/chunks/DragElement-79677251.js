import{L as C,M as Y,S as j,i as P,s as S,F as q,e as A,c as O,a as F,d as k,b as I,f as y,N as M,g as G,O as H,K as L,G as K,H as N,I as Q,q as R,o as U,P as V,Q as Z,R as B,v as J,E as W,T as x,U as $}from"./index-f717f60f.js";import{w as z}from"./index-fab45dfb.js";function ee(e){let t,s;function a(l){t=l.clientX,s=l.clientY,e.dispatchEvent(new CustomEvent("dragstart",{detail:{x:t,y:s}})),window.addEventListener("mousemove",f),window.addEventListener("mouseup",r)}function f(l){const o=l.clientX-t,n=l.clientY-s;t=l.clientX,s=l.clientY,e.dispatchEvent(new CustomEvent("dragmove",{detail:{x:t,y:s,dx:o,dy:n}}))}function r(l){t=l.clientX,s=l.clientY,e.dispatchEvent(new CustomEvent("dragend",{detail:{x:t,y:s}})),window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",r)}return e.addEventListener("mousedown",a),{destroy(){e.removeEventListener("mousedown",a)}}}function v(e){return Object.prototype.toString.call(e)==="[object Date]"}function D(e,t,s,a){if(typeof s=="number"||v(s)){const f=a-s,r=(s-t)/(e.dt||1/60),l=e.opts.stiffness*f,o=e.opts.damping*r,n=(l-o)*e.inv_mass,i=(r+n)*e.dt;return Math.abs(i)<e.opts.precision&&Math.abs(f)<e.opts.precision?a:(e.settled=!1,v(s)?new Date(s.getTime()+i):s+i)}else{if(Array.isArray(s))return s.map((f,r)=>D(e,t[r],s[r],a[r]));if(typeof s=="object"){const f={};for(const r in s)f[r]=D(e,t[r],s[r],a[r]);return f}else throw new Error(`Cannot spring ${typeof s} values`)}}function se(e,t={}){const s=z(e),{stiffness:a=.15,damping:f=.8,precision:r=.01}=t;let l,o,n,i=e,c=e,u=1,g=0,_=!1;function h(m,p={}){c=m;const T=n={};if(e==null||p.hard||d.stiffness>=1&&d.damping>=1)return _=!0,l=C(),i=m,s.set(e=c),Promise.resolve();if(p.soft){const b=p.soft===!0?.5:+p.soft;g=1/(b*60),u=0}return o||(l=C(),_=!1,o=Y(b=>{if(_)return _=!1,o=null,!1;u=Math.min(u+g,1);const w={inv_mass:u,opts:d,settled:!0,dt:(b-l)*60/1e3},X=D(w,i,e,c);return l=b,i=e,s.set(e=X),w.settled&&(o=null),!w.settled})),new Promise(b=>{o.promise.then(()=>{T===n&&b()})})}const d={set:h,update:(m,p)=>h(m(c,e),p),subscribe:s.subscribe,stiffness:a,damping:f,precision:r};return d}const E=z(0);function te(e){let t,s,a,f,r;const l=e[9].default,o=q(l,e,e[8],null);return{c(){t=A("div"),o&&o.c(),this.h()},l(n){t=O(n,"DIV",{class:!0,style:!0});var i=F(t);o&&o.l(i),i.forEach(k),this.h()},h(){I(t,"class",s="absolute inline-block select-none "+e[2]+" svelte-o9yde"),y(t,"transform","translate("+e[4].x+"px, "+e[4].y+"px)"),y(t,"z-index",e[0]),M(t,"highlightTop",e[3]===e[0])},m(n,i){G(n,t,i),o&&o.m(t,null),a=!0,f||(r=[H(ee.call(null,t)),L(t,"dragstart",e[6]),L(t,"dragmove",e[5])],f=!0)},p(n,[i]){o&&o.p&&(!a||i&256)&&K(o,l,n,n[8],a?Q(l,n[8],i,null):N(n[8]),null),(!a||i&4&&s!==(s="absolute inline-block select-none "+n[2]+" svelte-o9yde"))&&I(t,"class",s),(!a||i&16)&&y(t,"transform","translate("+n[4].x+"px, "+n[4].y+"px)"),(!a||i&1)&&y(t,"z-index",n[0]),i&13&&M(t,"highlightTop",n[3]===n[0])},i(n){a||(R(o,n),a=!0)},o(n){U(o,n),a=!1},d(n){n&&k(t),o&&o.d(n),f=!1,V(r)}}}function ne(e,t,s){let a,f,r=W,l=()=>(r(),r=B(i,d=>s(4,f=d)),i);Z(e,E,d=>s(3,a=d)),e.$$.on_destroy.push(()=>r());let{$$slots:o={},$$scope:n}=t,{coords:i=se({x:0,y:0})}=t;l();let{zIndex:c=0}=t,{containerClass:u=""}=t,{isDraggable:g=!0}=t;function _(d){g&&i.update(m=>({x:m.x+d.detail.dx,y:m.y+d.detail.dy}))}function h(){x(E,a++,a),s(0,c=$(E))}return J(()=>{h()}),e.$$set=d=>{"coords"in d&&l(s(1,i=d.coords)),"zIndex"in d&&s(0,c=d.zIndex),"containerClass"in d&&s(2,u=d.containerClass),"isDraggable"in d&&s(7,g=d.isDraggable),"$$scope"in d&&s(8,n=d.$$scope)},[c,i,u,a,f,_,h,g,n,o]}class ae extends j{constructor(t){super(),P(this,t,ne,te,S,{coords:1,zIndex:0,containerClass:2,isDraggable:7})}}export{ae as D,se as s};
