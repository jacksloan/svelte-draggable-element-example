import{H as e,I as t,S as s,i as n,s as o,D as i,e as a,c as r,a as l,d as c,b as d,J as u,K as p,f,L as m,G as v,E as g,v as x,r as h,M as y,N as b,O as w,z as E,C as $,P as C,Q as D}from"./index-87039ccd.js";import{w as z}from"./index-1172df8c.js";function L(e){let t,s;function n(n){t=n.clientX,s=n.clientY,e.dispatchEvent(new CustomEvent("dragstart",{detail:{x:t,y:s}})),window.addEventListener("mousemove",o),window.addEventListener("mouseup",i)}function o(n){const o=n.clientX-t,i=n.clientY-s;t=n.clientX,s=n.clientY,e.dispatchEvent(new CustomEvent("dragmove",{detail:{x:t,y:s,dx:o,dy:i}}))}function i(n){t=n.clientX,s=n.clientY,e.dispatchEvent(new CustomEvent("dragend",{detail:{x:t,y:s}})),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",i)}return e.addEventListener("mousedown",n),{destroy(){e.removeEventListener("mousedown",n)}}}function I(e){return"[object Date]"===Object.prototype.toString.call(e)}function j(e,t,s,n){if("number"==typeof s||I(s)){const o=n-s,i=(s-t)/(e.dt||1/60),a=(i+(e.opts.stiffness*o-e.opts.damping*i)*e.inv_mass)*e.dt;return Math.abs(a)<e.opts.precision&&Math.abs(o)<e.opts.precision?n:(e.settled=!1,I(s)?new Date(s.getTime()+a):s+a)}if(Array.isArray(s))return s.map(((o,i)=>j(e,t[i],s[i],n[i])));if("object"==typeof s){const o={};for(const i in s)o[i]=j(e,t[i],s[i],n[i]);return o}throw new Error(`Cannot spring ${typeof s} values`)}function M(s,n={}){const o=z(s),{stiffness:i=.15,damping:a=.8,precision:r=.01}=n;let l,c,d,u=s,p=s,f=1,m=0,v=!1;function g(n,i={}){p=n;const a=d={};if(null==s||i.hard||x.stiffness>=1&&x.damping>=1)return v=!0,l=e(),u=n,o.set(s=p),Promise.resolve();if(i.soft){const e=!0===i.soft?.5:+i.soft;m=1/(60*e),f=0}return c||(l=e(),v=!1,c=t((e=>{if(v)return v=!1,c=null,!1;f=Math.min(f+m,1);const t={inv_mass:f,opts:x,settled:!0,dt:60*(e-l)/1e3},n=j(t,u,s,p);return l=e,u=s,o.set(s=n),t.settled&&(c=null),!t.settled}))),new Promise((e=>{c.promise.then((()=>{a===d&&e()}))}))}const x={set:g,update:(e,t)=>g(e(p,s),t),subscribe:o.subscribe,stiffness:i,damping:a,precision:r};return x}const X=z(0);function Y(e){let t,s,n,o,b;const w=e[9].default,E=i(w,e,e[8],null);return{c(){t=a("div"),E&&E.c(),this.h()},l(e){t=r(e,"DIV",{class:!0,style:!0});var s=l(t);E&&E.l(s),s.forEach(c),this.h()},h(){d(t,"class",s="relative inline-block select-none "+e[2]+" svelte-1mlgc8v"),u(t,"transform","translate("+e[4].x+"px, "+e[4].y+"px)"),u(t,"z-index",e[0]),u(t,"cursor","grab"),p(t,"highlightTop",e[3]===e[0])},m(s,i){f(s,t,i),E&&E.m(t,null),n=!0,o||(b=[m(L.call(null,t)),v(t,"dragstart",e[6]),v(t,"dragmove",e[5])],o=!0)},p(e,[o]){E&&E.p&&256&o&&g(E,w,e,e[8],o,null,null),(!n||4&o&&s!==(s="relative inline-block select-none "+e[2]+" svelte-1mlgc8v"))&&d(t,"class",s),(!n||16&o)&&u(t,"transform","translate("+e[4].x+"px, "+e[4].y+"px)"),(!n||1&o)&&u(t,"z-index",e[0]),13&o&&p(t,"highlightTop",e[3]===e[0])},i(e){n||(x(E,e),n=!0)},o(e){h(E,e),n=!1},d(e){e&&c(t),E&&E.d(e),o=!1,y(b)}}}function P(e,t,s){let n,o,i=$,a=()=>(i(),i=w(c,(e=>s(4,o=e))),c);b(e,X,(e=>s(3,n=e))),e.$$.on_destroy.push((()=>i()));let{$$slots:r={},$$scope:l}=t,{coords:c=M({x:0,y:0})}=t;a();let{zIndex:d=0}=t,{containerClass:u=""}=t,{isDraggable:p=!0}=t;function f(){C(X,n++,n),s(0,d=D(X))}return E((()=>{f()})),e.$$set=e=>{"coords"in e&&a(s(1,c=e.coords)),"zIndex"in e&&s(0,d=e.zIndex),"containerClass"in e&&s(2,u=e.containerClass),"isDraggable"in e&&s(7,p=e.isDraggable),"$$scope"in e&&s(8,l=e.$$scope)},[d,c,u,n,o,function(e){p&&c.update((t=>({x:t.x+e.detail.dx,y:t.y+e.detail.dy})))},f,p,l,r]}class T extends s{constructor(e){super(),n(this,e,P,Y,o,{coords:1,zIndex:0,containerClass:2,isDraggable:7})}}export{T as D,M as s};
